!function(e){void 0!==acf.add_action&&acf.add_action("ready append",function(a){popTriggers=e(".acf-pb-options-modal-triggers a"),e(popTriggers).click(function(a){a.preventDefault(),popUp=e(this).attr("href"),currentPop=e(this).closest(".acf-field").find(popUp),e(currentPop).addClass("modal-active"),e(".pb-modal-underlay").hasClass("modal-active")||e(".pb-modal-underlay").addClass("modal-active"),e("body").hasClass("modal-active")||e("body").addClass("modal-active")}),e(".tb-close-icon").click(function(a){e(this).closest(".acf-pb-options-modal").removeClass("modal-active"),activeModal=e("#poststuff").find(".modal-active"),e("#poststuff").find(".column-modal-open").length||(e(".pb-modal-underlay").removeClass("modal-active"),e("body").removeClass("modal-active"))})})}(jQuery),jQuery(document).ready(function(e){function a(){e(".pb-column").removeClass("column-modal-open"),e("body").removeClass("modal-active"),e(".pb-modal-underlay").removeClass("modal-active"),e(".pb-column").find('[data-name$="elements_elements"] > .acf-input > .acf-flexible-content > .values > .layout').addClass("-collapsed")}function n(){a(),e(".pb-modal-underlay").addClass("modal-active"),e("body").addClass("modal-active"),e(currentColumn).addClass("column-modal-open"),e(currentColumn).css("opacity","0"),e(currentColumn).animate({opacity:1},400,function(){}),e(currentColumn).find('[data-name$="elements_elements"] > .acf-input > .acf-flexible-content > .values > .layout').removeClass("-collapsed"),e(currentColumn).closest('[class^="col-desk"]').prev('[class^="col-desk"]').length||e(currentColumn).find(".prev-column").hide(),e(currentColumn).closest('[class^="col-desk"]').next('[class^="col-desk"]').length||e(currentColumn).find(".next-column").hide()}function o(){e('[data-name$="options_size_on_large_screens"]').each(function(){e(this).find(".acf-input").hide(),largeColSize=e(this).find(".acf-input select option:selected").text(),e(this).find(".col-size").text(largeColSize)})}e("#wpwrap").append('<div class="pb-modal-underlay"></div>'),e.fn.chunk=function(e){for(var a=[],n=0;n<this.length;n+=e)a.push(this.slice(n,n+e));return this.pushStack(a,"chunk",e)},e("#page-builder > .acf-input > .acf-flexible-content > .clones > .layout > .acf-fields > .acf-field").not(".acf-field-section-options").chunk(2).wrap('<div class="pb-column"><div class="pb-column-inner"></div></div>'),e("#page-builder > .acf-input > .acf-flexible-content > .values > .layout > .acf-fields > .acf-field").not(".acf-field-section-options").chunk(2).wrap('<div class="pb-column"><div class="pb-column-inner"></div></div>'),columnsToWrap=e(".pb-column"),e(columnsToWrap).each(function(){colSize=e(this).find(".acf-responsive-options-desk-size-container > select option:selected"),e(this).wrap('<div class="col-desk-'+e(colSize).text()+'"></div>')}),header='<div class="pb-modal-header"><div class="modal-close"><span class="screen-reader-text">Close</span><span class="tb-close-icon"></span></div></div></div>',footer='<div class="pb-modal-footer"><div class="pb-modal-button"><a class="acf-button button button-primary prev-column" href="#">Prev Column</a></div><div class="pb-modal-button"><a class="acf-button button button-primary next-column" href="#">Next Column</a></div></div>',e(".pb-column").prepend(header),e(".pb-column").append(footer),colsParent=e('.acf-fields [class^="col-desk-"]').parent(),e(colsParent).each(function(a,n){cols=e(n).find(".pb-column .pb-modal-header"),e(cols).each(function(a){colNumber=a+1,e(this).prepend('<div class="cols-number">Column '+colNumber+"</div>")})}),colInner=e(".pb-column"),e('[data-name$="elements_elements"] > .acf-input > .acf-flexible-content > .values > .layout').addClass("-collapsed"),e('[data-name$="elements_elements"]').append('<div class="pb-modal-button"><a class="acf-button button button-primary pb-edit-button" href="#"">Edit Column</a></div>'),e("#poststuff").on("click",".pb-edit-button",function(a){currentColumn=e(this).closest(".pb-column"),n()}),e("#poststuff").on("click",".prev-column",function(a){activeColumn=e(this).closest(".pb-column"),activeColWrapper=e(activeColumn).closest('[class^="col-desk"]'),currentColumn=e(activeColWrapper).prev().find(".pb-column"),n()}),e("#poststuff").on("click",".next-column",function(a){activeColumn=e(this).closest(".pb-column"),activeColWrapper=e(activeColumn).closest('[class^="col-desk"]'),currentColumn=e(activeColWrapper).next().find(".pb-column"),n()}),e("#poststuff").on("click",".column-modal-open .pb-modal-header>.modal-close .tb-close-icon",function(e){a()}),e('[data-name$="options_size_on_large_screens"]').each(function(){e(this).find(".acf-input").hide(),largeColSize=e(this).find(".acf-input select option:selected").text(),e(this).append('<span><strong><span class="col-size">'+largeColSize+"</span> Columns</strong></span>")}),e("#poststuff").on("mouseenter",'[data-layout^="page_builder_columns"] > .acf-fields',function(a){var n=e(this);n.children('[class^="col-desk-"]').not(":first").prepend('<div class="column-merge"></div>');var s=n.parent().width()/12-1;n.children('[class^="col-desk-"]').each(function(a,n){e(n).width()}),e(".column-merge").draggable({axis:"x",helper:"clone",appendTo:n,grid:[s,0],drag:function(a,n){e(this).addClass("dragging");var s=e(this).parent(),t=n.helper,l=n.originalPosition.left>t.position().left?"left":"right",c=s.prev(),i=Math.round(s.parent().width()/12-10),d=Math.abs(n.originalPosition.left-t.position().left);if(s.parent().addClass("sizing"),d>=i){var r=c.attr("class").split("-"),p=s.attr("class").split("-");r[2]=parseFloat(r[2]),p[2]=parseFloat(p[2]),"left"===l?(r[2]--,p[2]++,r[2]>0&&r[2]<r[2]+p[2]?(c.attr("class",r.join("-")),s.attr("class",p.join("-")),n.originalPosition.left=t.position().left):e(this).draggable("option","disabled",!0)):(r[2]++,p[2]--,p[2]>0&&p[2]<p[2]+p[2]?(c.attr("class",r.join("-")),s.attr("class",p.join("-")),n.originalPosition.left=t.position().left):e(this).draggable("option","disabled",!0))}newClass=e(this).parent().attr("class"),console.log(newClass),e(this).parent().find(".acf-responsive-options-desk-size-container > select").val(newClass).change(),newPrevClass=e(this).parent().prev().attr("class"),console.log(newPrevClass),e(this).parent().prev().find(".acf-responsive-options-desk-size-container > select").val(newPrevClass).change(),o()},stop:function(){e(this).removeClass("dragging").parent().parent().removeClass("sizing")}})}),e("#poststuff").on("mouseleave",'[data-layout^="page_builder_columns"] > .acf-fields',function(a){e(".column-merge").remove()})});