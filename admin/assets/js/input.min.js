!function(e){void 0!==acf.add_action&&acf.add_action("ready append",function(o){popTriggers=e(".acf-pb-options-modal-triggers a"),e(popTriggers).click(function(o){o.preventDefault(),popUp=e(this).attr("href"),currentPop=e(this).closest(".acf-field").find(popUp),e(currentPop).addClass("modal-active"),e(".pb-modal-underlay").hasClass("modal-active")||e(".pb-modal-underlay").addClass("modal-active"),e("body").hasClass("modal-active")||e("body").addClass("modal-active")}),e(".tb-close-icon").click(function(o){e(this).closest(".acf-pb-options-modal").removeClass("modal-active"),activeModal=e("#poststuff").find(".modal-active"),e("#poststuff").find(".column-modal-open").length||(e(".pb-modal-underlay").removeClass("modal-active"),e("body").removeClass("modal-active"))})})}(jQuery),jQuery(document).ready(function(e){function o(){e(".pb-column").removeClass("column-modal-open"),e("body").removeClass("modal-active"),e(".pb-modal-underlay").removeClass("modal-active"),e(".pb-column").find('[data-name$="elements_elements"] > .acf-input > .acf-flexible-content > .values > .layout').addClass("-collapsed")}function s(){o(),e(".pb-modal-underlay").addClass("modal-active"),e("body").addClass("modal-active"),e(currentColumn).addClass("column-modal-open"),e(currentColumn).css("opacity","0"),e(currentColumn).animate({opacity:1},400,function(){}),e(currentColumn).find('[data-name$="elements_elements"] > .acf-input > .acf-flexible-content > .values > .layout').removeClass("-collapsed"),e(currentColumn).closest('[class^="col-desk"]').prev('[class^="col-desk"]').length||e(currentColumn).find(".prev-column").hide(),e(currentColumn).closest('[class^="col-desk"]').next('[class^="col-desk"]').length||e(currentColumn).find(".next-column").hide()}function n(){e('[data-name$="options_size_on_large_screens"]').each(function(){e(this).find(".acf-input").hide(),largeColSize=e(this).find(".acf-input select option:selected").text(),e(this).find(".col-size").text(largeColSize)})}e("#wpwrap").append('<div class="pb-modal-underlay"></div>'),e.fn.chunk=function(e){for(var o=[],s=0;s<this.length;s+=e)o.push(this.slice(s,s+e));return this.pushStack(o,"chunk",e)},e("#page-builder > .acf-input > .acf-flexible-content > .clones > .layout > .acf-fields > .acf-field").not(".acf-field-section-styles").chunk(2).wrap('<div class="pb-column"><div class="pb-column-inner"></div></div>'),e("#page-builder > .acf-input > .acf-flexible-content > .values > .layout > .acf-fields > .acf-field").not(".acf-field-section-styles").chunk(2).wrap('<div class="pb-column"><div class="pb-column-inner"></div></div>'),columnsToWrap=e(".pb-column"),e(columnsToWrap).each(function(){colSize=e(this).find(".acf-responsive-options-desk-size-container > select option:selected"),e(this).wrap('<div class="col-desk-'+e(colSize).text()+'"></div>')}),header='<div class="pb-modal-header"><div class="modal-close"><span class="screen-reader-text">Close</span><span class="tb-close-icon"></span></div></div></div>',footer='<div class="pb-modal-footer"><div class="pb-modal-button"><a class="acf-button button button-primary prev-column" href="#">Prev Column</a></div><div class="pb-modal-button"><a class="acf-button button button-primary next-column" href="#">Next Column</a></div></div>',e(".pb-column").prepend(header),e(".pb-column").append(footer),colsParent=e('.acf-fields [class^="col-desk-"]').parent(),e(colsParent).each(function(o,s){cols=e(s).find(".pb-column .pb-modal-header"),e(cols).each(function(o){colNumber=o+1,e(this).prepend('<div class="cols-number">Column '+colNumber+"</div>")})}),colInner=e(".pb-column"),e('[data-name$="elements_elements"] > .acf-input > .acf-flexible-content > .values > .layout').addClass("-collapsed"),e('[data-name$="elements_elements"]').append('<div class="pb-modal-button"><a class="acf-button button button-primary pb-edit-button" href="#"">Edit Column</a></div>'),e("#poststuff").on("click",".pb-edit-button",function(o){currentColumn=e(this).closest(".pb-column"),s()}),e("#poststuff").on("click",".prev-column",function(o){activeColumn=e(this).closest(".pb-column"),activeColWrapper=e(activeColumn).closest('[class^="col-desk"]'),currentColumn=e(activeColWrapper).prev().find(".pb-column"),s()}),e("#poststuff").on("click",".next-column",function(o){activeColumn=e(this).closest(".pb-column"),activeColWrapper=e(activeColumn).closest('[class^="col-desk"]'),currentColumn=e(activeColWrapper).next().find(".pb-column"),s()}),e("#poststuff").on("click",".column-modal-open .pb-modal-header>.modal-close .tb-close-icon",function(e){o()}),e('[data-name$="options_size_on_large_screens"]').each(function(){e(this).find(".acf-input").hide(),largeColSize=e(this).find(".acf-input select option:selected").text(),e(this).append('<span><strong><span class="col-size">'+largeColSize+"</span> Columns</strong></span>")}),e("#poststuff").on("mouseenter",'[data-layout^="page_builder_columns"] > .acf-fields',function(o){var s=e(this);s.children('[class^="col-desk-"]').not(":first").prepend('<div class="column-merge"></div>');var t=s.parent().width()/12-1;s.children('[class^="col-desk-"]').each(function(o,s){e(s).width()}),e(".column-merge").draggable({axis:"x",helper:"clone",appendTo:s,grid:[t,0],drag:function(o,s){e(this).addClass("dragging");var t=e(this).parent(),a=s.helper,l=s.originalPosition.left>a.position().left?"left":"right",c=t.prev(),i=Math.round(t.parent().width()/12-10),d=Math.abs(s.originalPosition.left-a.position().left);if(t.parent().addClass("sizing"),d>=i){var r=c.attr("class").split("-"),p=t.attr("class").split("-");r[2]=parseFloat(r[2]),p[2]=parseFloat(p[2]),"left"===l?(r[2]--,p[2]++,r[2]>0&&r[2]<r[2]+p[2]?(c.attr("class",r.join("-")),t.attr("class",p.join("-")),s.originalPosition.left=a.position().left):e(this).draggable("option","disabled",!0)):(r[2]++,p[2]--,p[2]>0&&p[2]<p[2]+p[2]?(c.attr("class",r.join("-")),t.attr("class",p.join("-")),s.originalPosition.left=a.position().left):e(this).draggable("option","disabled",!0))}newClass=e(this).parent().attr("class"),console.log(newClass),e(this).parent().find(".acf-responsive-options-desk-size-container > select").val(newClass).change(),newPrevClass=e(this).parent().prev().attr("class"),console.log(newPrevClass),e(this).parent().prev().find(".acf-responsive-options-desk-size-container > select").val(newPrevClass).change(),n()},stop:function(){e(this).removeClass("dragging").parent().parent().removeClass("sizing")}})}),e("#poststuff").on("mouseleave",'[data-layout^="page_builder_columns"] > .acf-fields',function(o){e(".column-merge").remove()}),e("#poststuff .pb-control-group input").on("input",function(){e(this).closest("ul.pb-control-group").hasClass("linked")&&e(this).closest("ul.pb-control-group").find("input").val(this.value)}),e("#poststuff .control-button").on("click",function(){e(this).toggleClass("linked"),e(this).closest("ul.pb-control-group").toggleClass("linked")})});